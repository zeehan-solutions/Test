import{r as o,a6 as I,j as e,v as s,L as b,B as k,K as y}from"./index.f1b5677a.js";import{b as C,I as j}from"./staricon.ac0f8733.js";import{R as L,c,F as P,L as m,g as f}from"./App.330cf7d8.js";import{C as R,a as _}from"./CardTitle.80df897e.js";import{b as E}from"./bgimage.20ea7dbb.js";const Z=()=>{const[t,x]=o.exports.useState(""),[n,N]=o.exports.useState(""),[d,l]=o.exports.useState(null),[i,v]=o.exports.useState(!1),w=I(),S=async r=>{var g,u,h;if(r.preventDefault(),!t.trim()||!n.trim()){l("Email and password are required.");return}if(!/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(t)){l("Please enter a valid email.");return}l(null);try{const a=await y.post("https://bapi.reownlogics.com/api/login",{email:t,password:n},{headers:{"Content-Type":"application/json"}}),p=a.data.token;p&&(i&&localStorage.setItem("authEmail",t),localStorage.setItem("authToken",p),localStorage.setItem("user_name",a.data.name),localStorage.setItem("user_email",a.data.email),console.log("i am login",a.data),localStorage.setItem("user_id",a.data.id),localStorage.setItem("user_role",a.data.role),localStorage.setItem("current_role",a.data.current_role),w("/home"))}catch(a){console.error("Login Error:",(g=a.response)==null?void 0:g.data),l(((h=(u=a.response)==null?void 0:u.data)==null?void 0:h.message)||"Invalid credentials")}};return e("div",{className:"auth-wrapper auth-cover",children:s(L,{className:"auth-inner m-0",children:[e(c,{className:"d-none d-lg-flex align-items-center p-5",lg:"8",sm:"12",style:{backgroundImage:`url(${E})`,backgroundSize:"cover",backgroundPosition:"center",height:"100vh"},children:e("div",{className:"w-100 d-lg-flex align-items-center justify-content-center px-5"})}),e(c,{className:"d-flex align-items-center auth-bg px-2 p-lg-5",lg:"4",sm:"12",children:s(c,{className:"px-xl-2 mx-auto",sm:"8",md:"6",lg:"12",children:[e("img",{src:C,alt:"QR Code",className:"img-fluid",width:"20"}),e(R,{tag:"h2",className:"fw-bold mb-1",children:"Welcome \u{1F44B}"}),e(_,{className:"mb-2",children:"Please login here"}),s(P,{className:"auth-login-form mt-2",onSubmit:S,children:[d&&e("div",{className:"alert alert-danger p-2",role:"alert",children:e("strong",{children:d})}),s("div",{className:"mb-1",children:[e(m,{className:"form-label",for:"login-email",children:"Email"}),e(f,{type:"email",value:t,onChange:r=>x(r.target.value),id:"login-email",placeholder:"john@example.com",autoFocus:!0})]}),s("div",{className:"mb-1",children:[e("div",{className:"d-flex justify-content-between",children:e(m,{className:"form-label",for:"login-password",children:"Password"})}),e(j,{className:"input-group-merge",id:"login-password",value:n,onChange:r=>N(r.target.value)})]}),s("div",{className:"d-flex justify-content-between",children:[s("div",{className:"form-check mb-1",children:[e(f,{type:"checkbox",id:"remember-me",checked:i,onChange:()=>v(!i)}),e(m,{className:"form-check-label",for:"remember-me",children:"Remember Me"})]}),e(b,{to:"/forgot-password",children:e("small",{children:"Forgot Password?"})})]}),e(k,{type:"submit",color:"primary",className:"custom-button",block:!0,children:"Sign in"})]}),s("p",{className:"text-center mt-2",children:[e("span",{className:"me-25",children:"Do not have an account?"}),e(b,{to:"/register",children:e("span",{children:"Sign Up"})})]})]})})]})})};export{Z as default};
