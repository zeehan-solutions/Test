import{p as s,t as J,a9 as B,m as $,a as D,j as i,r as p,v as l,K as z}from"./index.f1b5677a.js";import{h as N,s as E,M as F,k as R,F as G,L as O,g as C,l as W}from"./App.330cf7d8.js";import{F as j}from"./FormGroup.5310b8b2.js";import{f as S}from"./format.653cbd61.js";var Q=["children","className","barClassName","cssModule","value","min","max","animated","striped","color","bar","multi","tag","style","barStyle","barAriaValueText","barAriaLabelledBy"];function A(e,a){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),o.push.apply(o,t)}return o}function M(e){for(var a=1;a<arguments.length;a++){var o=arguments[a]!=null?arguments[a]:{};a%2?A(Object(o),!0).forEach(function(t){X(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):A(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function X(e,a,o){return a in e?Object.defineProperty(e,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[a]=o,e}function Z(e,a){if(e==null)return{};var o=ee(e,a),t,n;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)t=r[n],!(a.indexOf(t)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,t)||(o[t]=e[t]))}return o}function ee(e,a){if(e==null)return{};var o={},t=Object.keys(e),n,r;for(r=0;r<t.length;r++)n=t[r],!(a.indexOf(n)>=0)&&(o[n]=e[n]);return o}var te={animated:s.exports.bool,bar:s.exports.bool,barAriaLabelledBy:s.exports.string,barAriaValueText:s.exports.string,barClassName:s.exports.string,barStyle:s.exports.object,children:s.exports.node,className:s.exports.string,cssModule:s.exports.object,color:s.exports.string,max:s.exports.oneOfType([s.exports.string,s.exports.number]),min:s.exports.oneOfType([s.exports.string,s.exports.number]),multi:s.exports.bool,striped:s.exports.bool,style:s.exports.object,tag:J,value:s.exports.oneOfType([s.exports.string,s.exports.number])};function re(e){var a=e.children,o=e.className,t=e.barClassName,n=e.cssModule,r=e.value,u=r===void 0?0:r,v=e.min,y=v===void 0?0:v,g=e.max,f=g===void 0?100:g,x=e.animated,d=e.striped,m=e.color,k=e.bar,w=e.multi,P=e.tag,c=P===void 0?"div":P,h=e.style,b=h===void 0?{}:h,I=e.barStyle,V=I===void 0?{}:I,U=e.barAriaValueText,K=e.barAriaLabelledBy,L=Z(e,Q),Y=B(u)/B(f)*100,q=$(D(o,"progress"),n),H=$(D("progress-bar",k&&o||t,x?"progress-bar-animated":null,m?"bg-".concat(m):null,d||x?"progress-bar-striped":null),n),_={className:H,style:M(M(M({},k?b:{}),V),{},{width:"".concat(Y,"%")}),role:"progressbar","aria-valuenow":u,"aria-valuemin":y,"aria-valuemax":f,"aria-valuetext":U,"aria-labelledby":K,children:a};return k?i(c,{...L,..._}):i(c,{...L,style:b,className:q,children:w?a:i("div",{..._})})}re.propTypes=te;function oe(e,a){if(e==null)return{};var o=ae(e,a),t,n;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)t=r[n],!(a.indexOf(t)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,t)||(o[t]=e[t]))}return o}function ae(e,a){if(e==null)return{};var o={},t=Object.keys(e),n,r;for(r=0;r<t.length;r++)n=t[r],!(a.indexOf(n)>=0)&&(o[n]=e[n]);return o}var T=p.exports.forwardRef(function(e,a){var o=e.color,t=o===void 0?"currentColor":o,n=e.size,r=n===void 0?24:n,u=oe(e,["color","size"]);return i("svg",{ref:a,xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...u,children:i("polyline",{points:"6 9 12 15 18 9"})})});T.propTypes={color:s.exports.string,size:s.exports.oneOfType([s.exports.string,s.exports.number])};T.displayName="ChevronDown";const de=T;/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pe=N("outline","briefcase","IconBriefcase",[["path",{d:"M3 7m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M8 7v-2a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v2",key:"svg-1"}],["path",{d:"M12 12l0 .01",key:"svg-2"}],["path",{d:"M3 13a20 20 0 0 0 18 0",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ue=N("outline","calendar","IconCalendar",[["path",{d:"M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z",key:"svg-0"}],["path",{d:"M16 3v4",key:"svg-1"}],["path",{d:"M8 3v4",key:"svg-2"}],["path",{d:"M4 11h16",key:"svg-3"}],["path",{d:"M11 15h1",key:"svg-4"}],["path",{d:"M12 15v3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var he=N("outline","clock","IconClock",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 7v5l3 3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ge=N("outline","user-check","IconUserCheck",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-1"}],["path",{d:"M15 19l2 2l4 -4",key:"svg-2"}]]);const ne="https://bapi.reownlogics.com/api/employee/check-out",me=({setCheckOutModal:e,checkOutModal:a,time:o})=>{const[t,n]=p.exports.useState({lat:null,lng:null}),[r,u]=p.exports.useState(null),[v,y]=p.exports.useState(S(new Date,"hh:mm a"));p.exports.useEffect(()=>{const d=setInterval(()=>{y(S(new Date,"hh:mm a"))},1e3);return()=>clearInterval(d)},[]);const g=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(d=>{n({lat:d.coords.latitude,lng:d.coords.longitude})},d=>{alert("Unable to retrieve location. Please enable GPS.")}):alert("Geolocation is not supported by this browser.")},f=async()=>{if(!r){alert('Please select either "On Site" or "Out of Radius".');return}if(!t.lat||!t.lng){alert("Please get your location first.");return}const d={site:r,out_lat:t.lat||0,out_lng:t.lng||0};try{const m=localStorage.getItem("authToken"),k=await z.post(ne,d,{headers:{Authorization:`Bearer ${m}`,Accept:"application/json"}});e(!1),n({lat:"",lng:""})}catch{alert("Failed to check out. Please try again.")}},x=E.button`
    background-color: #0C1539 !important;
    width: 155px;
    height: 40px;
    border-radius: 10px !important;
    color: white;
    cursor: pointer;
    border: none;
    &:hover {
      background-color: #1a2447 !important;
    }
  `;return i("div",{className:"vertically-centered-modal",children:l(F,{isOpen:a,toggle:()=>e(!a),className:"modal-dialog-centered",children:[l(R,{style:{padding:"17px 30px 0 30px",width:"70%",margin:"0 auto"},children:[i("p",{style:{fontSize:"16px",color:"black"},children:"Check Out Time"}),l("div",{className:"text-center",children:[i("p",{children:"Your Check Out time is"}),i("p",{children:o}),l(G,{className:"w-sm-50 text-start",children:[i(j,{className:"mt-1",check:!0,children:l(O,{check:!0,children:[i(C,{type:"checkbox",name:"site",value:"on-site",checked:r==="on-site",onChange:()=>u("on-site")}),"On Site"]})}),i(j,{check:!0,children:l(O,{check:!0,children:[i(C,{type:"checkbox",name:"site",value:"out-of-radius",checked:r==="out-of-radius",onChange:()=>u("out-of-radius")}),"Out of Radius"]})}),l("p",{className:"pt-2",children:["latitude:",t.lat,", longitude:",t.lng]})]})]})]}),i(W,{className:"border-none text-center",style:{border:"none"},children:l("div",{className:"d-flex justify-content-center w-100",style:{gap:"15px"},children:[i(x,{onClick:f,children:"OK"}),i(x,{onClick:g,children:"Get My Location"})]})})]})})};const be=({checkInModal:e,setCheckInModal:a,time:o})=>{const[t,n]=p.exports.useState({option1:!1,option2:!1,option3:!1}),[r,u]=p.exports.useState({latitude:null,longitude:null}),[v,y]=p.exports.useState(!1),[g,f]=p.exports.useState(""),[x,d]=p.exports.useState(S(new Date,"hh:mm a"));p.exports.useEffect(()=>{const c=setInterval(()=>{d(S(new Date,"hh:mm a"))},1e3);return()=>clearInterval(c)},[]);const m=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(c=>{const{latitude:h,longitude:b}=c.coords;u({latitude:h,longitude:b})},c=>{console.error("Error getting location:",c)}):console.error("Geolocation is not supported by this browser.")},k=async()=>{const c=t.option1?"on-site":t.option2?"out-of-radius":t.option3?"vacation":"";if(!c){alert("Please select a site option before checking in.");return}if(!r.latitude||!r.longitude){alert("Please get Location First.");return}y(!0);try{const h=localStorage.getItem("authToken"),b=await z.post("https://bapi.reownlogics.com/api/employee/check-in",{site:c,lat:r.latitude||0,lng:r.longitude||0,comment:g},{headers:{Authorization:`Bearer ${h}`,Accept:"application/json"}});a(!1),u({latitude:"",longitude:""})}catch(h){console.error("Error checking in:",h),alert("Failed to check-in. Please try again.")}finally{y(!1)}},w=c=>{const{name:h,checked:b}=c.target;n({option1:!1,option2:!1,option3:!1,[h]:b})},P=E.button`
    background-color: #0c1539 !important;
    width: 155px;
    height: 40px;
    border-radius: 10px !important;
    color: white;
    cursor: pointer;
    transition: background-color 0.3s;
    border: none;

    &:hover {
      background-color: #1a2447 !important;
    }
  `;return i("div",{className:"vertically-centered-modal",children:l(F,{isOpen:e,toggle:()=>a(!e),className:"modal-dialog-centered",children:[l(R,{style:{padding:"17px 30px"},children:[i("p",{className:"pb-2",style:{fontSize:"16px",color:"black"},children:"Check In Time"}),l("div",{className:"text-start",children:[l("p",{children:["Your Check-in time is ",o]}),i("p",{children:"Where are you today?"}),l(G,{children:[i(j,{check:!0,children:l(O,{check:!0,children:[i(C,{type:"checkbox",name:"option1",checked:t.option1,onChange:w}),"On Site"]})}),i(j,{check:!0,children:l(O,{check:!0,children:[i(C,{type:"checkbox",name:"option2",checked:t.option2,onChange:w}),"Out of Radius"]})}),t.option2&&l("div",{children:[i(O,{for:"locationDetails",children:"Reason"}),i(C,{type:"textarea",onChange:c=>f(c.target.value),value:g,val:!0,name:"locationDetails",id:"locationDetails"})]}),i(j,{check:!0,children:l(O,{check:!0,children:[i(C,{type:"checkbox",name:"option3",checked:t.option3,onChange:w}),"On Vacation"]})})]}),r.latitude&&r.longitude&&i("div",{className:"mt-3 text-center",children:l("p",{children:["Latitude: ",r.latitude,", Longitude: ",r.longitude]})})]})]}),i(W,{className:"border-none text-center pt-2",children:l("div",{className:"d-flex w-100 justify-content-between",children:[i(P,{onClick:m,children:"Get My Location"}),i(P,{onClick:k,disabled:v,children:v?"Checking In...":"Check In"})]})})]})})};export{de as C,ge as I,re as P,me as a,be as b,he as c,ue as d,pe as e};
