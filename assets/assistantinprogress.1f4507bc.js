import{a6 as k,r as s,K as b,v as r,j as t,M as N}from"./index.b5bd9156.js";import{S as v,C as w,b as S,T}from"./App.6937329a.js";import{P as _}from"./planet.7b97fcd0.js";import{h as l}from"./moment.ef14f9cc.js";import{B as C}from"./Backbutton.88aa0173.js";function P(){const{statusType:i}=k(),[n,h]=s.exports.useState([]),[u,g]=s.exports.useState(!0),[c,f]=s.exports.useState(null),p=b();return s.exports.useEffect(()=>{(async()=>{try{const a=localStorage.getItem("authToken"),m=localStorage.getItem("user_role"),x=localStorage.getItem("user_id");if(!a){window.location.href="/login";return}let d="";m==="assistant"&&i==="progress"&&(d=`https://bapi.reownlogics.com/api/help-desk?employee_status_id=2&assigned_to_id=${x}`);const o=await N.get(d,{headers:{Authorization:`Bearer ${a}`}});h(o.data),console.log("response of tickets",o.data)}catch{f("Failed to fetch tickets")}finally{g(!1)}})()},[i]),u?r("div",{className:"d-flex justify-content-center align-items-center fs-3",style:{height:"calc(100vh - 170px)"},children:[t(v,{}),t("span",{className:"fs-2",style:{paddingBottom:"6px",paddingLeft:"5px"}})]}):c?t("div",{className:"text-danger",children:c}):r("div",{children:[t(C,{}),t(w,{className:"bg-white ticket-card",style:{borderRadius:"30px"},children:t(S,{children:r(T,{responsive:!0,className:"table-ticket",children:[t("thead",{children:r("tr",{children:[t("th",{children:"Name"}),t("th",{children:"Description"}),t("th",{children:"Department"}),t("th",{children:"Created at"}),t("th",{children:"Requested Time"}),t("th",{children:"Actions"})]})}),t("tbody",{children:n.length>0?n.map(e=>r("tr",{children:[t("td",{children:e.title}),t("td",{children:(e==null?void 0:e.description)&&e.description.length>3?`${e.description.slice(0,20)}...`:(e==null?void 0:e.description)||""}),t("td",{children:e.department.name}),t("td",{children:t("span",{style:{background:"rgba(58, 151, 76, 0.1)",padding:"10px",borderRadius:"100px",color:"#3A974C"},children:l(e.created_at).format("YYYY-MM-DD ")})}),t("td",{children:t("span",{children:l(e.created_at).format("hh:mm:ss A")})}),t("td",{children:t("button",{type:"button",onClick:()=>p(`/ticket-detail/${e.id}`),class:"btn btn-outline-primary rounded-pill",children:"view"})})]},e.id)):t("tr",{children:t("td",{colSpan:"6",className:"text-center",children:r("div",{className:"card bg-white text-center",children:[t("img",{src:_,height:400,width:400,className:"mx-auto d-block",alt:"Planet"}),t("h2",{children:"No tickets found"})]})})})})]})})})]})}export{P as default};
