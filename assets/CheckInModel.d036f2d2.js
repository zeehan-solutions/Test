import{p as s,t as q,a9 as U,m as A,a as B,j as i,v as l,r as p,K as H}from"./index.70eb4055.js";import{F as D,h as z,s as J,M as Q,j as X,k as Z,L as M,g as _,l as ee}from"./App.a52e237f.js";import{F as L}from"./FormGroup.a87cbf5e.js";import{f as E}from"./format.d1f7bdb8.js";var te=["children","className","barClassName","cssModule","value","min","max","animated","striped","color","bar","multi","tag","style","barStyle","barAriaValueText","barAriaLabelledBy"];function K(e,o){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);o&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,t)}return r}function W(e){for(var o=1;o<arguments.length;o++){var r=arguments[o]!=null?arguments[o]:{};o%2?K(Object(r),!0).forEach(function(t){re(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function re(e,o,r){return o in e?Object.defineProperty(e,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[o]=r,e}function oe(e,o){if(e==null)return{};var r=ae(e,o),t,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],!(o.indexOf(t)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,t)||(r[t]=e[t]))}return r}function ae(e,o){if(e==null)return{};var r={},t=Object.keys(e),n,a;for(a=0;a<t.length;a++)n=t[a],!(o.indexOf(n)>=0)&&(r[n]=e[n]);return r}var ne={animated:s.exports.bool,bar:s.exports.bool,barAriaLabelledBy:s.exports.string,barAriaValueText:s.exports.string,barClassName:s.exports.string,barStyle:s.exports.object,children:s.exports.node,className:s.exports.string,cssModule:s.exports.object,color:s.exports.string,max:s.exports.oneOfType([s.exports.string,s.exports.number]),min:s.exports.oneOfType([s.exports.string,s.exports.number]),multi:s.exports.bool,striped:s.exports.bool,style:s.exports.object,tag:q,value:s.exports.oneOfType([s.exports.string,s.exports.number])};function se(e){var o=e.children,r=e.className,t=e.barClassName,n=e.cssModule,a=e.value,h=a===void 0?0:a,d=e.min,O=d===void 0?0:d,k=e.max,y=k===void 0?100:k,w=e.animated,f=e.striped,C=e.color,x=e.bar,g=e.multi,b=e.tag,T=b===void 0?"div":b,j=e.style,N=j===void 0?{}:j,P=e.barStyle,S=P===void 0?{}:P,u=e.barAriaValueText,c=e.barAriaLabelledBy,m=oe(e,te),v=U(h)/U(y)*100,I=A(B(r,"progress"),n),R=A(B("progress-bar",x&&r||t,w?"progress-bar-animated":null,C?"bg-".concat(C):null,f||w?"progress-bar-striped":null),n),F={className:R,style:W(W(W({},x?N:{}),S),{},{width:"".concat(v,"%")}),role:"progressbar","aria-valuenow":h,"aria-valuemin":O,"aria-valuemax":y,"aria-valuetext":u,"aria-labelledby":c,children:o};return x?i(T,{...m,...F}):i(T,{...m,style:N,className:I,children:g?o:i("div",{...F})})}se.propTypes=ne;var ie=["className","closeClassName","closeAriaLabel","cssModule","tag","color","isOpen","toggle","children","transition","fade","innerRef"];function Y(e,o){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);o&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,t)}return r}function $(e){for(var o=1;o<arguments.length;o++){var r=arguments[o]!=null?arguments[o]:{};o%2?Y(Object(r),!0).forEach(function(t){le(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function le(e,o,r){return o in e?Object.defineProperty(e,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[o]=r,e}function ce(e,o){if(e==null)return{};var r=pe(e,o),t,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],!(o.indexOf(t)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,t)||(r[t]=e[t]))}return r}function pe(e,o){if(e==null)return{};var r={},t=Object.keys(e),n,a;for(a=0;a<t.length;a++)n=t[a],!(o.indexOf(n)>=0)&&(r[n]=e[n]);return r}var de={children:s.exports.node,className:s.exports.string,closeClassName:s.exports.string,closeAriaLabel:s.exports.string,color:s.exports.string,cssModule:s.exports.object,fade:s.exports.bool,innerRef:s.exports.oneOfType([s.exports.object,s.exports.string,s.exports.func]),isOpen:s.exports.bool,tag:q,toggle:s.exports.func,transition:s.exports.shape(D.propTypes)};function G(e){var o=e.className,r=e.closeClassName,t=e.closeAriaLabel,n=t===void 0?"Close":t,a=e.cssModule,h=e.tag,d=h===void 0?"div":h,O=e.color,k=O===void 0?"success":O,y=e.isOpen,w=y===void 0?!0:y,f=e.toggle,C=e.children,x=e.transition,g=x===void 0?$($({},D.defaultProps),{},{unmountOnExit:!0}):x,b=e.fade,T=b===void 0?!0:b,j=e.innerRef,N=ce(e,ie),P=A(B(o,"alert","alert-".concat(k),{"alert-dismissible":f}),a),S=A(B("btn-close",r),a),u=$($($({},D.defaultProps),g),{},{baseClass:T?g.baseClass:"",timeout:T?g.timeout:0});return l(D,{...N,...u,tag:d,className:P,in:w,role:"alert",innerRef:j,children:[f?i("button",{type:"button",className:S,"aria-label":n,onClick:f}):null,C]})}G.propTypes=de;function ue(e,o){if(e==null)return{};var r=he(e,o),t,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],!(o.indexOf(t)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,t)||(r[t]=e[t]))}return r}function he(e,o){if(e==null)return{};var r={},t=Object.keys(e),n,a;for(a=0;a<t.length;a++)n=t[a],!(o.indexOf(n)>=0)&&(r[n]=e[n]);return r}var V=p.exports.forwardRef(function(e,o){var r=e.color,t=r===void 0?"currentColor":r,n=e.size,a=n===void 0?24:n,h=ue(e,["color","size"]);return i("svg",{ref:o,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...h,children:i("polyline",{points:"6 9 12 15 18 9"})})});V.propTypes={color:s.exports.string,size:s.exports.oneOfType([s.exports.string,s.exports.number])};V.displayName="ChevronDown";const ye=V;/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xe=z("outline","briefcase","IconBriefcase",[["path",{d:"M3 7m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M8 7v-2a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v2",key:"svg-1"}],["path",{d:"M12 12l0 .01",key:"svg-2"}],["path",{d:"M3 13a20 20 0 0 0 18 0",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Oe=z("outline","calendar","IconCalendar",[["path",{d:"M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z",key:"svg-0"}],["path",{d:"M16 3v4",key:"svg-1"}],["path",{d:"M8 3v4",key:"svg-2"}],["path",{d:"M4 11h16",key:"svg-3"}],["path",{d:"M11 15h1",key:"svg-4"}],["path",{d:"M12 15v3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ke=z("outline","clock","IconClock",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 7v5l3 3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var we=z("outline","user-check","IconUserCheck",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-1"}],["path",{d:"M15 19l2 2l4 -4",key:"svg-2"}]]);const ge="https://bapi.reownlogics.com/api/employee/check-out",Ce=({setCheckOutModal:e,checkOutModal:o,time:r,fetchEmployeeAttendence:t,fetchCurrentDaySummary:n})=>{const[a,h]=p.exports.useState({lat:null,lng:null}),[d,O]=p.exports.useState(!1),[k,y]=p.exports.useState(""),[w,f]=p.exports.useState(""),[C,x]=p.exports.useState(""),[g,b]=p.exports.useState(null),[T,j]=p.exports.useState(E(new Date,"hh:mm a"));p.exports.useEffect(()=>{const u=setInterval(()=>{j(E(new Date,"hh:mm a"))},1e3);return()=>clearInterval(u)},[]);const N=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(u=>{h({lat:u.coords.latitude,lng:u.coords.longitude})},u=>{alert("Unable to retrieve location. Please enable GPS.")}):alert("Geolocation is not supported by this browser.")},P=async()=>{var c,m;if(!g){f("Select an Option First");return}if(!a.lat||!a.lng){alert("Please get your location first.");return}const u={site:g,out_lat:a.lat||0,out_lng:a.lng||0};O(!0),y("");try{const v=localStorage.getItem("authToken"),I=await H.post(ge,u,{headers:{Authorization:`Bearer ${v}`,Accept:"application/json"}});await t(),await n(),x("Check Out Successfully"),setTimeout(()=>{e(!1),x("")},2e3),h({lat:"",lng:""}),b(null)}catch(v){y(((m=(c=v.response)==null?void 0:c.data)==null?void 0:m.message)||"Failed to check out. Please try again.")}finally{O(!1)}},S=J.button`
    background-color: #0C1539 !important;
    width: 155px;
    height: 40px;
    border-radius: 10px !important;
    color: white;
    cursor: pointer;
    border: none;
    &:hover {
      background-color: #1a2447 !important;
    }
      &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  `;return i("div",{className:"vertically-centered-modal",children:l(Q,{isOpen:o,toggle:()=>e(!o),className:"modal-dialog-centered",children:[l(X,{style:{padding:"17px 30px 0 30px",width:"100%",margin:"0 auto"},children:[i("p",{className:"fw-medium",style:{fontSize:"18px",color:"black"},children:"Check Out Time"}),l("div",{className:"text-start",children:[l("p",{children:["Your Check Out time is ",r]}),l(Z,{className:"w-sm-50 text-start",children:[i(L,{className:"mt-1",check:!0,children:l(M,{check:!0,children:[i(_,{type:"checkbox",name:"site",value:"on-site",checked:g==="on-site",onChange:()=>{b("on-site"),f("")}}),"On Site"]})}),i(L,{className:"pb-1",check:!0,children:l(M,{check:!0,children:[i(_,{type:"checkbox",name:"site",value:"out-of-radius",checked:g==="out-of-radius",onChange:()=>{b("out-of-radius"),f("")}}),"Out of Radius"]})}),a.lat&&a.lng&&l("p",{className:" fs-5",children:["latitude: ",i("span",{className:"pe-1",children:a.lat})," longitude:",i("span",{children:a.lng})," "]}),k&&i("p",{className:"text-danger",children:k}),w&&i("p",{className:"text-danger",children:w}),C&&i(G,{color:"success",className:"mt-2 p-1",children:C})]})]})]}),i(ee,{className:" text-center pt-2",children:l("div",{className:"d-flex justify-content-between w-100",children:[i(S,{onClick:N,children:"Get My Location"}),i(S,{onClick:P,disabled:d||!a.lat||!a.lng,children:d?"Checking Out...":"Check Out"})]})})]})})};const Se=({checkInModal:e,setCheckInModal:o,time:r,fetchCurrentDaySummary:t,fetchEmployeeAttendence:n})=>{const[a,h]=p.exports.useState({option1:!1,option2:!1,option3:!1}),[d,O]=p.exports.useState({latitude:null,longitude:null}),[k,y]=p.exports.useState(!1),[w,f]=p.exports.useState(""),[C,x]=p.exports.useState(""),[g,b]=p.exports.useState(""),[T,j]=p.exports.useState(E(new Date,"hh:mm a"));p.exports.useEffect(()=>{const c=setInterval(()=>{j(E(new Date,"hh:mm a"))},1e3);return()=>clearInterval(c)},[]);const N=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(c=>{const{latitude:m,longitude:v}=c.coords;O({latitude:m,longitude:v})},c=>{console.error("Error getting location:",c)}):console.error("Geolocation is not supported by this browser.")},P=async()=>{const c=a.option1?"on-site":a.option2?"out-of-radius":a.option3?"vacation":"";if(!c){f("Select an Option First");return}y(!0);try{const m=localStorage.getItem("authToken"),v=new Date,I=v.getTimezoneOffset()*6e4,R=new Date(v-I).toISOString().slice(0,19).replace("T"," "),F=await H.post("https://bapi.reownlogics.com/api/employee/check-in",{site:c,lat:d.latitude||0,lng:d.longitude||0,comment:C,check_in:R},{headers:{Authorization:`Bearer ${m}`,Accept:"application/json"}});await t(),await n(),b("Check In Successfully"),setTimeout(()=>{o(!1),b("")},2e3),h({option1:!1,option2:!1,option3:!1}),O({latitude:"",longitude:""})}catch(m){console.error("Error checking in:",m),alert("Failed to check-in. Please try again.")}finally{y(!1)}},S=c=>{const{name:m,checked:v}=c.target;h({option1:!1,option2:!1,option3:!1,[m]:v}),f("")},u=J.button`
    background-color: #0c1539 !important;
    width: 155px;
    height: 40px;
    border-radius: 10px !important;
    color: white;
    cursor: pointer;
    transition: background-color 0.3s;
    border: none;

    &:hover {
      background-color: #1a2447 !important;
    }
      &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  `;return i("div",{className:"vertically-centered-modal",children:l(Q,{isOpen:e,toggle:()=>o(!e),className:"modal-dialog-centered",children:[l(X,{style:{padding:"17px 30px"},children:[i("p",{className:"pb-1 mb-0 fw-medium",style:{fontSize:"18px",color:"black"},children:"Check In Time"}),l("div",{className:"text-start",children:[l("p",{children:["Your Check-in time is ",r]}),i("p",{children:"Where are you today?"}),l(Z,{children:[i(L,{check:!0,children:l(M,{check:!0,children:[i(_,{type:"checkbox",name:"option1",checked:a.option1,onChange:S}),"On Site"]})}),i(L,{check:!0,children:l(M,{check:!0,children:[i(_,{type:"checkbox",name:"option2",checked:a.option2,onChange:S}),"Out of Radius"]})}),a.option2&&l("div",{style:{marginBottom:"5px"},children:[i(M,{for:"locationDetails",children:"Reason"}),i(_,{type:"textarea",onChange:c=>x(c.target.value),value:C,val:!0,name:"locationDetails",id:"locationDetails"})]}),i(L,{check:!0,children:l(M,{check:!0,children:[i(_,{type:"checkbox",name:"option3",checked:a.option3,onChange:S}),"On Vacation"]})})]}),d.latitude&&d.longitude&&i("div",{className:"mt-1 text-start",children:l("p",{className:"mb-0",children:["Latitude: ",i("span",{className:"pe-1",children:d.latitude}),"  Longitude: ",i("span",{children:d.longitude})]})}),w&&i("p",{className:"text-danger mb-0 text-center",children:w}),g&&i(G,{color:"success",className:"mt-2 p-1",children:g})]})]}),i(ee,{className:"border-none text-center pt-2",children:l("div",{className:"d-flex w-100 justify-content-between",children:[i(u,{onClick:N,children:"Get My Location"}),i(u,{onClick:P,disabled:k||!d.latitude||!d.longitude,children:k?"Checking In...":"Check In"})]})})]})})};export{ye as C,we as I,se as P,Ce as a,Se as b,ke as c,Oe as d,xe as e};
