import{a5 as p,r as a,a6 as k,j as e,v as r,K as x}from"./index.8f15b5f4.js";import{C as w,b as D,T as N,U as T,O as b,P as _,Q as v,V as Y}from"./App.8a97c86d.js";import{P as R}from"./planet.7b97fcd0.js";import{h as i}from"./moment.68d8b8f0.js";function C(){const{statusId:o}=p(),[d,l]=a.exports.useState([]),[h,u]=a.exports.useState(!0),[n,m]=a.exports.useState(null),g=k();return a.exports.useEffect(()=>{(async()=>{try{const s=localStorage.getItem("authToken"),S=localStorage.getItem("user_role"),f=localStorage.getItem("user_id");if(!s){window.location.href="/login";return}const c=await x.get(`https://bapi.reownlogics.com/api/help-desk?manager_status_id=3&employee_id=${f}`,{headers:{Authorization:`Bearer ${s}`}});l(c.data),console.log("response of tickets",c.data)}catch{m("Failed to fetch tickets")}finally{u(!1)}})()},[o]),h?e("div",{children:"Loading tickets..."}):n?e("div",{className:"text-danger",children:n}):e("div",{children:e(w,{className:"bg-white ticket-card",children:e(D,{children:r(N,{striped:!0,responsive:!0,children:[e("thead",{children:r("tr",{children:[e("th",{children:"Name"}),e("th",{children:"Requested Date"}),e("th",{children:"Requested Time"}),e("th",{children:"Rating"}),e("th",{children:"Time for Requested to Resolution"}),e("th",{children:"Actions"})]})}),e("tbody",{children:d.length>0?d.map(t=>r("tr",{children:[e("td",{children:t.title}),e("td",{children:i(t.created_at).format("YYYY-MM-DD")}),e("td",{children:i(t.created_at).format("hh:mm:ss A")}),e("td",{children:t.title}),e("td",{children:e("span",{style:{background:"#daf1df",padding:"6px",borderRadius:"100px"},children:i(t.created_at).format("YYYY-MM-DD hh:mm:ss A")})}),e("td",{children:r(T,{children:[e(b,{className:"pe-1",tag:"span",children:e(_,{size:15})}),e(v,{end:!0,children:e(Y,{onClick:()=>g(`/ticket-detail/${t.id}`),children:e("span",{className:"align-middle ms-50",children:"Detail"})})})]})})]},t.id)):e("tr",{children:e("td",{colSpan:"6",className:"text-center",children:r("div",{className:"card bg-white text-center",children:[e("img",{src:R,height:400,width:400,className:"mx-auto d-block",alt:"Planet"}),e("h2",{children:"No tickets found"})]})})})})]})})})})}export{C as default};
