import{a5 as x,r as a,a6 as k,v as s,j as e,K as w}from"./index.021d50c3.js";import{S as N,C as b,b as v,T as D,W as S,Y as T,Z as _,$ as C,a0 as y}from"./App.1f34475c.js";import{P as A}from"./planet.7b97fcd0.js";import{h as I}from"./moment.68d8b8f0.js";function $(){const{statusType:i}=x(),[n,l]=a.exports.useState([]),[h,p]=a.exports.useState(!0),[d,g]=a.exports.useState(null),m=k();return a.exports.useEffect(()=>{(async()=>{try{const r=localStorage.getItem("authToken"),u=localStorage.getItem("user_role"),f=localStorage.getItem("user_id");if(!r){window.location.href="/login";return}let c="";u==="assistant"&&i==="progress"&&(c=`https://bapi.reownlogics.com/api/help-desk?assigned_status_id=4&assigned_to_id=${f}`);const o=await w.get(c,{headers:{Authorization:`Bearer ${r}`}});l(o.data),console.log("response of tickets",o.data)}catch{g("Failed to fetch tickets")}finally{p(!1)}})()},[i]),h?s("div",{className:"d-flex justify-content-center align-items-center fs-3",style:{height:"calc(100vh - 170px)"},children:[e(N,{}),e("span",{className:"fs-2",style:{paddingBottom:"6px",paddingLeft:"5px"}})]}):d?e("div",{className:"text-danger",children:d}):e("div",{children:e(b,{className:"bg-white ticket-card",children:e(v,{children:s(D,{striped:!0,responsive:!0,children:[e("thead",{children:s("tr",{children:[e("th",{children:"Name"}),e("th",{children:"Description"}),e("th",{children:"Department"}),e("th",{children:"Created At"}),e("th",{children:"Actions"})]})}),e("tbody",{children:n.length>0?n.map(t=>s("tr",{children:[e("td",{children:t.title}),e("td",{children:t.description}),e("td",{children:t.department.name}),e("td",{children:e("span",{style:{background:"#daf1df",padding:"6px",borderRadius:"100px"},children:I(t.created_at).format("YYYY-MM-DD hh:mm:ss A")})}),e("td",{children:s(S,{children:[e(T,{className:"pe-1",tag:"span",children:e(_,{size:15})}),e(C,{end:!0,children:e(y,{onClick:()=>m(`/ticket-detail/${t.id}`),children:e("span",{className:"align-middle ms-50",children:"Detail"})})})]})})]},t.id)):e("tr",{children:e("td",{colSpan:"6",className:"text-center",children:s("div",{className:"card bg-white text-center",children:[e("img",{src:A,height:400,width:400,className:"mx-auto d-block",alt:"Planet"}),e("h2",{children:"No tickets found"})]})})})})]})})})})}export{$ as default};
