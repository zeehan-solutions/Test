import{p as i,t as Q,a9 as F,m as G,a as R,j as a,r as d,v as l,K as V}from"./index.021d50c3.js";import{i as D,s as U,M as K,k as Y,l as q,L as P,h as T,m as H}from"./App.1f34475c.js";import{F as I}from"./FormGroup.6c2cc22f.js";import{f as B,A as J}from"./format.22bcb888.js";var X=["children","className","barClassName","cssModule","value","min","max","animated","striped","color","bar","multi","tag","style","barStyle","barAriaValueText","barAriaLabelledBy"];function W(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,o)}return r}function z(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?W(Object(r),!0).forEach(function(o){Z(e,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))})}return e}function Z(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function ee(e,n){if(e==null)return{};var r=te(e,n),o,s;if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(s=0;s<t.length;s++)o=t[s],!(n.indexOf(o)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,o)||(r[o]=e[o]))}return r}function te(e,n){if(e==null)return{};var r={},o=Object.keys(e),s,t;for(t=0;t<o.length;t++)s=o[t],!(n.indexOf(s)>=0)&&(r[s]=e[s]);return r}var ae={animated:i.exports.bool,bar:i.exports.bool,barAriaLabelledBy:i.exports.string,barAriaValueText:i.exports.string,barClassName:i.exports.string,barStyle:i.exports.object,children:i.exports.node,className:i.exports.string,cssModule:i.exports.object,color:i.exports.string,max:i.exports.oneOfType([i.exports.string,i.exports.number]),min:i.exports.oneOfType([i.exports.string,i.exports.number]),multi:i.exports.bool,striped:i.exports.bool,style:i.exports.object,tag:Q,value:i.exports.oneOfType([i.exports.string,i.exports.number])};function oe(e){var n=e.children,r=e.className,o=e.barClassName,s=e.cssModule,t=e.value,g=t===void 0?0:t,p=e.min,S=p===void 0?0:p,v=e.max,y=v===void 0?100:v,x=e.animated,k=e.striped,O=e.color,w=e.bar,b=e.multi,f=e.tag,L=f===void 0?"div":f,N=e.style,j=N===void 0?{}:N,M=e.barStyle,C=M===void 0?{}:M,h=e.barAriaValueText,c=e.barAriaLabelledBy,u=ee(e,X),m=F(g)/F(y)*100,_=G(R(r,"progress"),s),A=G(R("progress-bar",w&&r||o,x?"progress-bar-animated":null,O?"bg-".concat(O):null,k||x?"progress-bar-striped":null),s),$={className:A,style:z(z(z({},w?j:{}),C),{},{width:"".concat(m,"%")}),role:"progressbar","aria-valuenow":g,"aria-valuemin":S,"aria-valuemax":y,"aria-valuetext":h,"aria-labelledby":c,children:n};return w?a(L,{...u,...$}):a(L,{...u,style:j,className:_,children:b?n:a("div",{...$})})}oe.propTypes=ae;function re(e,n){if(e==null)return{};var r=ne(e,n),o,s;if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(s=0;s<t.length;s++)o=t[s],!(n.indexOf(o)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,o)||(r[o]=e[o]))}return r}function ne(e,n){if(e==null)return{};var r={},o=Object.keys(e),s,t;for(t=0;t<o.length;t++)s=o[t],!(n.indexOf(s)>=0)&&(r[s]=e[s]);return r}var E=d.exports.forwardRef(function(e,n){var r=e.color,o=r===void 0?"currentColor":r,s=e.size,t=s===void 0?24:s,g=re(e,["color","size"]);return a("svg",{ref:n,xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:o,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...g,children:a("polyline",{points:"6 9 12 15 18 9"})})});E.propTypes={color:i.exports.string,size:i.exports.oneOfType([i.exports.string,i.exports.number])};E.displayName="ChevronDown";const pe=E;/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ue=D("outline","briefcase","IconBriefcase",[["path",{d:"M3 7m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M8 7v-2a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v2",key:"svg-1"}],["path",{d:"M12 12l0 .01",key:"svg-2"}],["path",{d:"M3 13a20 20 0 0 0 18 0",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var he=D("outline","calendar","IconCalendar",[["path",{d:"M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z",key:"svg-0"}],["path",{d:"M16 3v4",key:"svg-1"}],["path",{d:"M8 3v4",key:"svg-2"}],["path",{d:"M4 11h16",key:"svg-3"}],["path",{d:"M11 15h1",key:"svg-4"}],["path",{d:"M12 15v3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var me=D("outline","clock","IconClock",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 7v5l3 3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.29.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ge=D("outline","user-check","IconUserCheck",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-1"}],["path",{d:"M15 19l2 2l4 -4",key:"svg-2"}]]);const se="https://bapi.reownlogics.com/api/employee/check-out",be=({setCheckOutModal:e,checkOutModal:n,time:r,fetchEmployeeAttendence:o,fetchCurrentDaySummary:s})=>{const[t,g]=d.exports.useState({lat:null,lng:null}),[p,S]=d.exports.useState(!1),[v,y]=d.exports.useState(""),[x,k]=d.exports.useState(""),[O,w]=d.exports.useState(""),[b,f]=d.exports.useState(null),[L,N]=d.exports.useState(B(new Date,"hh:mm a"));d.exports.useEffect(()=>{const h=setInterval(()=>{N(B(new Date,"hh:mm a"))},1e3);return()=>clearInterval(h)},[]);const j=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(h=>{g({lat:h.coords.latitude,lng:h.coords.longitude})},h=>{alert("Unable to retrieve location. Please enable GPS.")}):alert("Geolocation is not supported by this browser.")},M=async()=>{var c,u;if(!b){k("Select an Option First");return}if(!t.lat||!t.lng){alert("Please get your location first.");return}const h={site:b,out_lat:t.lat||0,out_lng:t.lng||0};S(!0),y("");try{const m=localStorage.getItem("authToken"),_=await V.post(se,h,{headers:{Authorization:`Bearer ${m}`,Accept:"application/json"}});await o(),await s(),w("Check Out Successfully"),setTimeout(()=>{e(!1),w("")},2e3),g({lat:"",lng:""}),f(null)}catch(m){y(((u=(c=m.response)==null?void 0:c.data)==null?void 0:u.message)||"Failed to check out. Please try again.")}finally{S(!1)}},C=U.button`
    background-color: #0C1539 !important;
    width: 155px;
    height: 40px;
    border-radius: 10px !important;
    color: white;
    cursor: pointer;
    border: none;
    &:hover {
      background-color: #1a2447 !important;
    }
      &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  `;return a("div",{className:"vertically-centered-modal",children:l(K,{isOpen:n,toggle:()=>e(!n),className:"modal-dialog-centered",children:[l(Y,{style:{padding:"17px 30px 0 30px",width:"100%",margin:"0 auto"},children:[a("p",{className:"fw-medium",style:{fontSize:"18px",color:"black"},children:"Check Out Time"}),l("div",{className:"text-start",children:[l("p",{children:["Your Check Out time is ",r]}),l(q,{className:"w-sm-50 text-start",children:[a(I,{className:"mt-1",check:!0,children:l(P,{check:!0,children:[a(T,{type:"checkbox",name:"site",value:"on-site",checked:b==="on-site",onChange:()=>{f("on-site"),k("")}}),"On Site"]})}),a(I,{className:"pb-1",check:!0,children:l(P,{check:!0,children:[a(T,{type:"checkbox",name:"site",value:"out-of-radius",checked:b==="out-of-radius",onChange:()=>{f("out-of-radius"),k("")}}),"Out of Radius"]})}),t.lat&&t.lng&&l("p",{className:" fs-5",children:["latitude: ",a("span",{className:"pe-1",children:t.lat})," longitude:",a("span",{children:t.lng})," "]}),v&&a("p",{className:"text-danger",children:v}),x&&a("p",{className:"text-danger",children:x}),O&&a(J,{color:"success",className:"mt-2 p-1",children:O})]})]})]}),a(H,{className:" text-center pt-2",children:l("div",{className:"d-flex justify-content-between w-100",children:[a(C,{onClick:j,children:"Get My Location"}),a(C,{onClick:M,disabled:p||!t.lat||!t.lng,children:p?"Checking Out...":"Check Out"})]})})]})})};const fe=({checkInModal:e,setCheckInModal:n,time:r,fetchCurrentDaySummary:o,fetchEmployeeAttendence:s})=>{const[t,g]=d.exports.useState({option1:!1,option2:!1,option3:!1}),[p,S]=d.exports.useState({latitude:null,longitude:null}),[v,y]=d.exports.useState(!1),[x,k]=d.exports.useState(""),[O,w]=d.exports.useState(""),[b,f]=d.exports.useState(""),[L,N]=d.exports.useState(B(new Date,"hh:mm a"));d.exports.useEffect(()=>{const c=setInterval(()=>{N(B(new Date,"hh:mm a"))},1e3);return()=>clearInterval(c)},[]);const j=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(c=>{const{latitude:u,longitude:m}=c.coords;S({latitude:u,longitude:m})},c=>{console.error("Error getting location:",c)}):console.error("Geolocation is not supported by this browser.")},M=async()=>{const c=t.option1?"on-site":t.option2?"out-of-radius":t.option3?"vacation":"";if(!c){k("Select an Option First");return}y(!0);try{const u=localStorage.getItem("authToken"),m=new Date,_=m.getTimezoneOffset()*6e4,A=new Date(m-_).toISOString().slice(0,19).replace("T"," "),$=await V.post("https://bapi.reownlogics.com/api/employee/check-in",{site:c,lat:p.latitude||0,lng:p.longitude||0,comment:O,check_in:A},{headers:{Authorization:`Bearer ${u}`,Accept:"application/json"}});await o(),await s(),f("Check In Successfully"),setTimeout(()=>{n(!1),f("")},2e3),g({option1:!1,option2:!1,option3:!1}),S({latitude:"",longitude:""})}catch(u){console.error("Error checking in:",u),alert("Failed to check-in. Please try again.")}finally{y(!1)}},C=c=>{const{name:u,checked:m}=c.target;g({option1:!1,option2:!1,option3:!1,[u]:m}),k("")},h=U.button`
    background-color: #0c1539 !important;
    width: 155px;
    height: 40px;
    border-radius: 10px !important;
    color: white;
    cursor: pointer;
    transition: background-color 0.3s;
    border: none;

    &:hover {
      background-color: #1a2447 !important;
    }
      &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  `;return a("div",{className:"vertically-centered-modal",children:l(K,{isOpen:e,toggle:()=>n(!e),className:"modal-dialog-centered",children:[l(Y,{style:{padding:"17px 30px"},children:[a("p",{className:"pb-1 mb-0 fw-medium",style:{fontSize:"18px",color:"black"},children:"Check In Time"}),l("div",{className:"text-start",children:[l("p",{children:["Your Check-in time is ",r]}),a("p",{children:"Where are you today?"}),l(q,{children:[a(I,{check:!0,children:l(P,{check:!0,children:[a(T,{type:"checkbox",name:"option1",checked:t.option1,onChange:C}),"On Site"]})}),a(I,{check:!0,children:l(P,{check:!0,children:[a(T,{type:"checkbox",name:"option2",checked:t.option2,onChange:C}),"Out of Radius"]})}),t.option2&&l("div",{style:{marginBottom:"5px"},children:[a(P,{for:"locationDetails",children:"Reason"}),a(T,{type:"textarea",onChange:c=>w(c.target.value),value:O,val:!0,name:"locationDetails",id:"locationDetails"})]}),a(I,{check:!0,children:l(P,{check:!0,children:[a(T,{type:"checkbox",name:"option3",checked:t.option3,onChange:C}),"On Vacation"]})})]}),p.latitude&&p.longitude&&a("div",{className:"mt-1 text-start",children:l("p",{className:"mb-0",children:["Latitude: ",a("span",{className:"pe-1",children:p.latitude}),"  Longitude: ",a("span",{children:p.longitude})]})}),x&&a("p",{className:"text-danger mb-0 text-center",children:x}),b&&a(J,{color:"success",className:"mt-2 p-1",children:b})]})]}),a(H,{className:"border-none text-center pt-2",children:l("div",{className:"d-flex w-100 justify-content-between",children:[a(h,{onClick:j,children:"Get My Location"}),a(h,{onClick:M,disabled:v||!p.latitude||!p.longitude,children:v?"Checking In...":"Check In"})]})})]})})};export{pe as C,ge as I,oe as P,be as a,fe as b,me as c,he as d,ue as e};
