import{a5 as k,r as a,a6 as x,j as e,v as r,K as w}from"./index.fe43fbf5.js";import{C as b,b as N,T as _,Q as v,V as D,W as T,Y as S,Z as A}from"./App.9644e084.js";import{P as C}from"./planet.7b97fcd0.js";import{h as I}from"./moment.68d8b8f0.js";function j(){const{statusType:s}=k(),[c,h]=a.exports.useState([]),[p,g]=a.exports.useState(!0),[d,m]=a.exports.useState(null),u=x();return a.exports.useEffect(()=>{(async()=>{try{const i=localStorage.getItem("authToken"),f=localStorage.getItem("user_role"),o=localStorage.getItem("user_id");if(!i){window.location.href="/login";return}let n="";f==="assistant"&&(s==="completed"?n=`https://bapi.reownlogics.com/api/help-desk/completed_by_assistant/${o}`:s==="reopen"&&(n=`https://bapi.reownlogics.com/api/help-desk/reopen_tickets_for_assistant/${o}`));const l=await w.get(n,{headers:{Authorization:`Bearer ${i}`}});h(l.data),console.log("response of tickets",l.data)}catch{m("Failed to fetch tickets")}finally{g(!1)}})()},[s]),p?e("div",{children:"Loading tickets..."}):d?e("div",{className:"text-danger",children:d}):e("div",{children:e(b,{className:"bg-white ticket-card",children:e(N,{children:r(_,{striped:!0,responsive:!0,children:[e("thead",{children:r("tr",{children:[e("th",{children:"Name"}),e("th",{children:"Description"}),e("th",{children:"Rating"}),e("th",{children:"Created At"}),s==="completed"&&e("th",{children:"Actions"})]})}),e("tbody",{children:c.length>0?c.map(t=>r("tr",{children:[e("td",{children:t.help_desk.title}),e("td",{children:t.help_desk.description}),e("td",{children:t.rating}),e("td",{children:e("span",{style:{background:"#daf1df",padding:"6px",borderRadius:"100px"},children:I(t.created_at).format("YYYY-MM-DD hh:mm:ss A")})}),s==="completed"&&e("td",{children:r(v,{children:[e(D,{className:"pe-1",tag:"span",children:e(T,{size:15})}),e(S,{end:!0,children:e(A,{onClick:()=>u(`/ticket-detail/${t.id}`),children:e("span",{className:"align-middle ms-50",children:"Detail"})})})]})})]},t.id)):e("tr",{children:e("td",{colSpan:"6",className:"text-center",children:r("div",{className:"card bg-white text-center",children:[e("img",{src:C,height:400,width:400,className:"mx-auto d-block",alt:"Planet"}),e("h2",{children:"No tickets found"})]})})})})]})})})})}export{j as default};
