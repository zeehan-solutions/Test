import{a5 as f,r as i,j as e,v as a,K as k}from"./index.f9ed2f7a.js";import{C as _,b as w,T as x,U as b,Q as D,W as T,Y as N}from"./App.b83c219c.js";const Y="/assets/planet.4f2c2be0.png";function R(){const{statusId:s}=f(),[c,m]=i.exports.useState([]),[p,g]=i.exports.useState(!0),[o,u]=i.exports.useState(null);return i.exports.useEffect(()=>{(async()=>{try{const n=localStorage.getItem("authToken"),l=localStorage.getItem("user_role"),d=localStorage.getItem("user_id");if(!n){window.location.href="/login";return}let r="";l==="manager"?r=`https://bapi.reownlogics.com/api/help-desk?manager_status_id=${s}&department_manager_id=${d}`:l==="employee"?r=`https://bapi.reownlogics.com/api/help-desk?employee_status_id=${s}&employee_id=${d}`:r=`https://bapi.reownlogics.com/api/help-desk?assigned_to_id=${d}&assigned_status_id=${s}`;const h=await k.get(r,{headers:{Authorization:`Bearer ${n}`}});m(h.data||[]),console.log("response of tickets",h.data)}catch{u("Failed to fetch tickets")}finally{g(!1)}})()},[s]),p?e("div",{children:"Loading tickets..."}):o?e("div",{className:"text-danger",children:o}):e("div",{children:e(_,{className:"bg-white ticket-card",children:e(w,{children:a(x,{striped:!0,responsive:!0,children:[e("thead",{children:a("tr",{children:[e("th",{children:"Name"}),e("th",{children:"Requested Date"}),e("th",{children:"Requested Time"}),e("th",{children:"Rating"}),e("th",{children:"Time for Requested to Resolution"}),e("th",{children:"Actions"})]})}),e("tbody",{children:c.length>0?c.map(t=>a("tr",{children:[e("td",{children:t.title}),e("td",{children:moment(t.created_at).format("YYYY-MM-DD")}),e("td",{children:moment(t.created_at).format("hh:mm:ss A")}),e("td",{children:t.title}),e("td",{children:e("span",{style:{background:"#daf1df",padding:"6px",borderRadius:"100px"},children:moment(t.created_at).format("YYYY-MM-DD hh:mm:ss A")})}),e("td",{children:a(b,{children:[e(D,{className:"pe-1",tag:"span",children:e(MoreHorizontal,{size:15})}),e(T,{end:!0,children:e(N,{onClick:()=>navigate(`/ticket-detail/${t.id}`),children:e("span",{className:"align-middle ms-50",children:"Detail"})})})]})})]},t.id)):e("tr",{children:e("td",{colSpan:"6",className:"text-center",children:a("div",{className:"card bg-white text-center",children:[e("img",{src:Y,height:400,width:400,className:"mx-auto d-block",alt:"Planet"}),e("h2",{children:"No tickets found"})]})})})})]})})})})}export{R as default};
