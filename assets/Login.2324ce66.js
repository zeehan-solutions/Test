import{r as l,K as k,j as e,v as t,L as x,B as C,M as L}from"./index.0e991307.js";import{b as _,I as j}from"./staricon.56f79451.js";import{R as P,c as m,l as R,L as c,h as N}from"./App.f2f7ddbf.js";import{C as E,a as T}from"./CardTitle.7106e3ec.js";import{b as z}from"./bgimage.20ea7dbb.js";const $=()=>{const[s,v]=l.exports.useState(""),[n,S]=l.exports.useState(""),[d,o]=l.exports.useState(null),[i,w]=l.exports.useState(!1),I=k(),[g,u]=l.exports.useState(!1),y=async r=>{var p,h,f;if(r.preventDefault(),!s.trim()||!n.trim()){o("Email and password are required.");return}if(!/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(s)){o("Please enter a valid email.");return}o(null),u(!0);try{const a=await L.post("https://bapi.reownlogics.com/api/login",{email:s,password:n},{headers:{"Content-Type":"application/json"}}),b=a.data.token;b&&(i&&localStorage.setItem("authEmail",s),localStorage.setItem("authToken",b),localStorage.setItem("user_name",a.data.name),localStorage.setItem("user_email",a.data.email),console.log("i am login",a.data),localStorage.setItem("user_id",a.data.id),localStorage.setItem("employee_id",a.data.employee_id.id),localStorage.setItem("user_role",a.data.role),localStorage.setItem("current_role",a.data.current_role),localStorage.setItem("picture",a.data.picture),localStorage.setItem("department",((p=a.data.department)==null?void 0:p.name)||"No Department"),I("/home"))}catch(a){console.error("Login Error:",a),o(((f=(h=a.response)==null?void 0:h.data)==null?void 0:f.message)||"Invalid credentials"),u(!1)}};return e("div",{className:"auth-wrapper auth-cover",children:t(P,{className:"auth-inner m-0",children:[e(m,{className:"d-none d-lg-flex align-items-center p-5",lg:"8",sm:"12",style:{backgroundImage:`url(${z})`,backgroundSize:"cover",backgroundPosition:"center",height:"100vh"},children:e("div",{className:"w-100 d-lg-flex align-items-center justify-content-center px-5"})}),e(m,{className:"d-flex align-items-center auth-bg px-2 p-lg-5",lg:"4",sm:"12",children:t(m,{className:"px-xl-2 mx-auto",sm:"8",md:"6",lg:"12",children:[e("img",{src:_,alt:"QR Code",className:"img-fluid",width:"20"}),e(E,{tag:"h2",className:"fw-bold mb-1",children:"Welcome \u{1F44B}"}),e(T,{className:"mb-2",children:"Please login here"}),t(R,{className:"auth-login-form mt-2",onSubmit:y,children:[d&&e("div",{className:"alert alert-danger p-2",role:"alert",children:e("strong",{children:d})}),t("div",{className:"mb-1",children:[e(c,{className:"form-label",for:"login-email",children:"Email"}),e(N,{type:"email",value:s,onChange:r=>v(r.target.value),id:"login-email",placeholder:"john@example.com",autoFocus:!0})]}),t("div",{className:"mb-1",children:[e("div",{className:"d-flex justify-content-between",children:e(c,{className:"form-label",for:"login-password",children:"Password"})}),e(j,{className:"input-group-merge",id:"login-password",value:n,onChange:r=>S(r.target.value)})]}),t("div",{className:"d-flex justify-content-between",children:[t("div",{className:"form-check mb-1",children:[e(N,{type:"checkbox",id:"remember-me",checked:i,onChange:()=>w(!i)}),e(c,{className:"form-check-label",for:"remember-me",children:"Remember Me"})]}),e(x,{to:"/forgot-password",children:e("small",{children:"Forgot Password?"})})]}),e(C,{type:"submit",color:"primary",className:"custom-button",block:!0,disabled:g,children:g?"Signing In...":"Sign In"})]}),t("p",{className:"text-center mt-2",children:[e("span",{className:"me-25",children:"Do not have an account?"}),e(x,{to:"/register",children:e("span",{children:"Sign Up"})})]})]})})]})})};export{$ as default};
