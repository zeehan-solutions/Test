import{r as o,a6 as y,j as t,v as a,K as b,L as N}from"./index.8f15b5f4.js";import{R as S,c as I,C,b as v,s as A,I as R,f as M,S as j,g as E,T as Y,U as z,O as L,P as $,Q as B,V as O}from"./App.8a97c86d.js";import{h as w}from"./moment.68d8b8f0.js";import{C as P}from"./createhelpdesk.8550a018.js";import{C as U,a as q}from"./CardTitle.a973e15f.js";import{c as G,C as H,a as V,I as K,b as Q}from"./c3.03250414.js";function F(){var l,d,h,s,p,k;const[e,c]=o.exports.useState(null),u=y(),i=async()=>{try{const r=localStorage.getItem("authToken"),n=localStorage.getItem("user_id");if(!r){window.location.href="/login",console.error("No token found, please login.");return}const g=await b.get(`https://bapi.reownlogics.com/api/assistant_dashboard/${n}`,{headers:{Authorization:`Bearer ${r}`}});c(g.data)}catch(r){console.error("Error fetching ticket stats:",r),c(null)}};if(o.exports.useEffect(()=>{i()},[]),!e)return t("div",{className:"text-center p-2",children:"Loading stats..."});const _=[{key:"total_tickets",label:"Total Tickets",value:(l=e==null?void 0:e.total_tickets)!=null?l:0,percentage:(d=e==null?void 0:e.percentage_change_total)!=null?d:0,img:G,trend:(e==null?void 0:e.percentage_change_total)>0?"up":(e==null?void 0:e.percentage_change_total)<0?"down":"neutral"},{key:"completed_tickets",label:"Completed Tickets",value:(h=e==null?void 0:e.completed_tickets)!=null?h:0,percentage:(s=e==null?void 0:e.percentage_change_completed)!=null?s:0,img:H,trend:(e==null?void 0:e.percentage_change_completed)>0?"up":(e==null?void 0:e.percentage_change_completed)<0?"down":"neutral"},{key:"pending_tickets",label:"Pending Tickets",value:(p=e==null?void 0:e.pending_tickets)!=null?p:0,percentage:(k=e==null?void 0:e.percentage_change_pending)!=null?k:0,img:V,trend:(e==null?void 0:e.percentage_change_pending)>0?"up":(e==null?void 0:e.percentage_change_pending)<0?"down":"neutral"}],m={"Pending Tickets":2,"In Progress Tickets":3,"Completed Tickets":4,Reopen:6,"Closed-Rejected":7},f=r=>{const n=m[r];n&&u(`/tickets/${n}`)};return t("div",{children:t(S,{children:_.map((r,n)=>t(I,{sm:"6",md:"4",children:t(C,{className:"ticket-card bg-white",onClick:()=>f(r.label),style:{borderRadius:"30px"},children:a(v,{children:[a("div",{className:"d-flex justify-content-between",children:[a(U,{tag:"h6",className:"text-muted pe-auto",children:[r.label,t("h3",{className:"mt-2",children:r.value})]}),r.img&&t("img",{src:r.img,alt:"Icon",style:{width:60,height:60,marginLeft:"10px"}})]}),a("div",{className:"d-flex align-items-center",children:[r.trend==="up"&&t(K,{size:16,style:{color:"green"}}),r.trend==="down"&&t(Q,{size:16,style:{color:"red"}}),a("span",{className:"text-primary ms-1",children:[r.percentage,"%"]}),r.trend!=="neutral"&&t(q,{className:"text-muted ms-1",children:r.trend==="up"?"Up from yesterday":"Down from yesterday"})]})]})})},n))})})}A.button`
  background-color: #0C1539 !important;
  width: 200px;
  padding: 10px;
  color: white;
  cursor: pointer;
  border-radius: 10px!important;
  transition: background-color 0.3s;

  &:hover {
    background-color: #1a2447 !important; /* Lighter shade on hover */
  }
`;const re=()=>{const e=y();o.exports.useState(!1),o.exports.useState([]);const[c,u]=o.exports.useState(""),[i,_]=o.exports.useState("newest"),[m,f]=o.exports.useState([]);o.exports.useState(!1);const l=async()=>{try{const r=localStorage.getItem("authToken"),n=localStorage.getItem("user_id");if(!r){e("/login"),console.error("No token found, please login.");return}const g=await b.get(`https://bapi.reownlogics.com/api/help-desk?assigned_to_id=${n}`,{headers:{Authorization:`Bearer ${r}`}});let x=g.data;x.sort((D,T)=>new Date(T.created_at)-new Date(D.created_at)),f(x.slice(0,5)),console.log("employee data data",g.data)}catch(r){console.error("Error fetching employee data: ",r)}};o.exports.useEffect(()=>{l()},[]);const d=(r,n)=>i==="newest"?new Date(n.createdAt)-new Date(r.createdAt):i==="oldest"?new Date(r.createdAt)-new Date(n.createdAt):0,h=m.filter(r=>r.title.toLowerCase().includes(c.toLowerCase())).sort(d),[s,p]=o.exports.useState(!1);return a("div",{children:[t("div",{className:"d-flex justify-content-end align-items-center mb-2",children:t(P,{isOpen:s,toggle:()=>{p(!s)}})}),t(F,{}),a(C,{className:"bg-white ticket-card",children:[a("div",{className:"p-2 d-flex justify-content-between align-items-center",children:[t("div",{children:t("h3",{children:"Recent Ticket"})}),a("div",{className:"d-flex align-items-center justify-content-end",children:[a(R,{className:"mr-3",children:[t(M,{children:t(j,{size:16})}),t(E,{placeholder:"Search by name",value:c,onChange:r=>u(r.target.value)})]}),t(N,{to:"/allassistanttickets",style:{width:"50%"},className:"ms-1",children:"View All"})]})]}),t(v,{children:a(Y,{striped:!0,responsive:!0,children:[t("thead",{children:a("tr",{children:[t("th",{children:"Name"}),t("th",{children:"Requested Date"}),t("th",{children:"Requested Time"}),t("th",{children:"Rating"}),t("th",{children:"Time for Requested to Resolution"}),t("th",{children:"Actions"})]})}),t("tbody",{children:h.map(r=>a("tr",{children:[t("td",{children:r.title}),t("td",{children:w(r.created_at).format("YYYY-MM-DD")}),t("td",{children:w(r.created_at).format("hh:mm:ss A")}),t("td",{children:r.title}),t("td",{children:t("span",{style:{background:"#daf1df",padding:"6px",borderRadius:"100px"},children:w(r.created_at).format("YYYY-MM-DD hh:mm:ss A")})}),t("td",{children:a(z,{children:[t(L,{className:"pe-1",tag:"span",children:t($,{size:15})}),t(B,{end:!0,children:t(O,{onClick:()=>e(`/ticket-detail/${r.id}`),children:t("span",{className:"align-middle ms-50",children:"Detail"})})})]})})]},r.id))})]})})]})]})};export{re as default};
