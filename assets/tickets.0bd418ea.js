import{a6 as f,r as s,K as k,v as a,j as e,M as x}from"./index.9ce7a48c.js";import{S as w,C as N,b,T as v,a3 as D,a4 as S,a5 as T,a6 as C,a7 as B}from"./App.67f4a7e8.js";import{P as I}from"./planet.7b97fcd0.js";import{h as _}from"./moment.ef14f9cc.js";import{B as y}from"./Backbutton.191c060c.js";function $(){const{statusId:r}=f(),[n,l]=s.exports.useState([]),[h,p]=s.exports.useState(!0),[c,g]=s.exports.useState(null),m=k();return s.exports.useEffect(()=>{(async()=>{try{const i=localStorage.getItem("authToken"),A=localStorage.getItem("user_role"),u=localStorage.getItem("user_id");if(!i){window.location.href="/login";return}let d="";d=`https://bapi.reownlogics.com/api/help-desk?employee_status_id=${r}&employee_id=${u}`;const o=await x.get(d,{headers:{Authorization:`Bearer ${i}`}});l(o.data),console.log("response of tickets",o.data)}catch{g("Failed to fetch tickets")}finally{p(!1)}})()},[r]),h?a("div",{className:"d-flex justify-content-center align-items-center fs-3",style:{height:"calc(100vh - 170px)"},children:[e(w,{}),e("span",{className:"fs-2",style:{paddingBottom:"6px",paddingLeft:"5px"}})]}):c?e("div",{className:"text-danger",children:c}):a("div",{children:[e(y,{}),e(N,{className:"bg-white ticket-card",style:{borderRadius:"30px"},children:e(b,{children:a(v,{responsive:!0,className:"table-ticket",children:[e("thead",{children:a("tr",{children:[e("th",{children:"Name"}),e("th",{children:"Description"}),r==="4"&&e("th",{children:"Rating"}),e("th",{children:"Department"}),e("th",{children:"Created At"}),e("th",{children:"Actions"})]})}),e("tbody",{children:n.length>0?n.map(t=>a("tr",{children:[e("td",{children:t.title}),e("td",{children:t.description}),r==="4"&&e("td",{children:t.reviews.length>0?t.reviews[0].rating:"No rating"}),e("td",{children:t.department.name}),e("td",{children:e("span",{style:{background:"rgba(58, 151, 76, 0.1)",padding:"10px",borderRadius:"100px",color:"#3A974C"},children:_(t.created_at).format("YYYY-MM-DD hh:mm:ss A")})}),e("td",{children:a(D,{children:[e(S,{className:"pe-1",tag:"span",children:e(T,{size:15})}),e(C,{end:!0,children:e(B,{onClick:()=>m(`/ticket-detail/${t.id}`),children:e("span",{className:"align-middle ms-50",children:"Detail"})})})]})})]},t.id)):e("tr",{children:e("td",{colSpan:"6",className:"text-center",children:a("div",{className:"card bg-white text-center",children:[e("img",{src:I,height:400,width:400,className:"mx-auto d-block",alt:"Planet"}),e("h2",{children:"No tickets found"})]})})})})]})})})]})}export{$ as default};
