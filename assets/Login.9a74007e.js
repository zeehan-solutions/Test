import{r as n,a6 as k,j as e,v as s,L as b,B as I,K as y}from"./index.0c706ca6.js";import{b as C,I as R}from"./staricon.610c8dea.js";import{R as j,c,F as L,L as m,g as f}from"./App.dac02815.js";import{C as P,a as $}from"./CardTitle.d2d46202.js";import{b as z}from"./bgimage.20ea7dbb.js";const M=()=>{const[t,x]=n.exports.useState(""),[o,N]=n.exports.useState(""),[d,r]=n.exports.useState(null),[i,v]=n.exports.useState(!1),w=k(),S=async l=>{var g,u,h;if(l.preventDefault(),!t.trim()||!o.trim()){r("Email and password are required.");return}if(!/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(t)){r("Please enter a valid email.");return}if(!/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@#$%^&*!])[A-Za-z\d@#$%^&*!]{6,20}$/.test(o)){r("Password must be 6-20 characters long and include letters, numbers, and special characters @#$%^&*.");return}r(null);try{const a=await y.post("http://bapi.reownlogics.com/api/login",{email:t,password:o},{headers:{"Content-Type":"application/json"}}),p=a.data.token;p&&(i&&localStorage.setItem("authEmail",t),localStorage.setItem("authToken",p),localStorage.setItem("user_name",a.data.name),localStorage.setItem("user_email",a.data.email),console.log(a.data),localStorage.setItem("user_id",a.data.id),localStorage.setItem("user_role",a.data.role),w("/home"))}catch(a){console.error("Login Error:",(g=a.response)==null?void 0:g.data),r(((h=(u=a.response)==null?void 0:u.data)==null?void 0:h.message)||"Invalid credentials")}};return e("div",{className:"auth-wrapper auth-cover",children:s(j,{className:"auth-inner m-0",children:[e(c,{className:"d-none d-lg-flex align-items-center p-5",lg:"8",sm:"12",style:{backgroundImage:`url(${z})`,backgroundSize:"cover",backgroundPosition:"center",height:"100vh"},children:e("div",{className:"w-100 d-lg-flex align-items-center justify-content-center px-5"})}),e(c,{className:"d-flex align-items-center auth-bg px-2 p-lg-5",lg:"4",sm:"12",children:s(c,{className:"px-xl-2 mx-auto",sm:"8",md:"6",lg:"12",children:[e("img",{src:C,alt:"QR Code",className:"img-fluid",width:"20"}),e(P,{tag:"h2",className:"fw-bold mb-1",children:"Welcome \u{1F44B}"}),e($,{className:"mb-2",children:"Please login here"}),s(L,{className:"auth-login-form mt-2",onSubmit:S,children:[d&&e("div",{className:"alert alert-danger p-2",role:"alert",children:e("strong",{children:d})}),s("div",{className:"mb-1",children:[e(m,{className:"form-label",for:"login-email",children:"Email"}),e(f,{type:"email",value:t,onChange:l=>x(l.target.value),id:"login-email",placeholder:"john@example.com",autoFocus:!0})]}),s("div",{className:"mb-1",children:[e("div",{className:"d-flex justify-content-between",children:e(m,{className:"form-label",for:"login-password",children:"Password"})}),e(R,{className:"input-group-merge",id:"login-password",value:o,onChange:l=>N(l.target.value)})]}),s("div",{className:"d-flex justify-content-between",children:[s("div",{className:"form-check mb-1",children:[e(f,{type:"checkbox",id:"remember-me",checked:i,onChange:()=>v(!i)}),e(m,{className:"form-check-label",for:"remember-me",children:"Remember Me"})]}),e(b,{to:"/forgot-password",children:e("small",{children:"Forgot Password?"})})]}),e(I,{type:"submit",color:"primary",className:"custom-button",block:!0,children:"Sign in"})]}),s("p",{className:"text-center mt-2",children:[e("span",{className:"me-25",children:"Do not have an account?"}),e(b,{to:"/register",children:e("span",{children:"Sign Up"})})]})]})})]})})};export{M as default};
