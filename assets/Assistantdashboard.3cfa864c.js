import{r as c,a6 as C,j as t,v as a,K as b,L as N}from"./index.77ed9b33.js";import{R as S,c as I,C as v,b as T,s as A,I as R,f as M,S as $,g as j,T as E,P as z,Q as L,V as P,W as B,Y}from"./App.24656bef.js";import{h as O}from"./moment.68d8b8f0.js";import{C as U}from"./createhelpdesk.ae906216.js";import{C as G,a as H}from"./CardTitle.8fb572a9.js";import{c as V,C as K,a as Q,b as W,d as q,I as F,e as J}from"./c5.34e01369.js";function X(){var u,m,k,d,f,y,n,i,p,g;const[e,l]=c.exports.useState(null),s=C(),h=async()=>{try{const r=localStorage.getItem("authToken"),o=localStorage.getItem("user_id");if(!r){window.location.href="/login",console.error("No token found, please login.");return}const D=await b.get(`https://bapi.reownlogics.com/api/assistant_dashboard/${o}`,{headers:{Authorization:`Bearer ${r}`}});l(D.data)}catch(r){console.error("Error fetching ticket stats:",r),l(null)}};if(c.exports.useEffect(()=>{h()},[]),!e)return t("div",{className:"text-center p-2",children:"Loading stats..."});const x=[{key:"total_tickets",label:"Total Tickets",value:(u=e==null?void 0:e.total_tickets)!=null?u:0,percentage:(m=e==null?void 0:e.percentage_change_total)!=null?m:0,img:V,trend:(e==null?void 0:e.percentage_change_total)>0?"up":(e==null?void 0:e.percentage_change_total)<0?"down":"neutral"},{key:"completed_tickets",label:"Completed Tickets",value:(k=e==null?void 0:e.completed_tickets)!=null?k:0,percentage:(d=e==null?void 0:e.percentage_change_completed)!=null?d:0,img:K,trend:(e==null?void 0:e.percentage_change_completed)>0?"up":(e==null?void 0:e.percentage_change_completed)<0?"down":"neutral"},{key:"pending_tickets",label:"Pending Tickets",value:(f=e==null?void 0:e.pending_tickets)!=null?f:0,percentage:(y=e==null?void 0:e.percentage_change_pending)!=null?y:0,img:Q,trend:(e==null?void 0:e.percentage_change_pending)>0?"up":(e==null?void 0:e.percentage_change_pending)<0?"down":"neutral"},{key:"inprogress_tickets",label:"In Progress Tickets",value:(n=e==null?void 0:e.inprogress_tickets)!=null?n:0,percentage:(i=e==null?void 0:e.percentage_change_inprogress)!=null?i:0,img:W,trend:(e==null?void 0:e.percentage_change_inprogress)>0?"up":(e==null?void 0:e.percentage_change_inprogress)<0?"down":"neutral"},{key:"Reopen",label:"Reopen",value:(p=e==null?void 0:e.reopen_tickets)!=null?p:0,percentage:(g=e==null?void 0:e.percentage_change_reopen)!=null?g:0,img:q,trend:(e==null?void 0:e.percentage_change_reopen)>0?"up":(e==null?void 0:e.percentage_change_reopen)<0?"down":"neutral"}],_={"Pending Tickets":2,"In Progress Tickets":"progress","Completed Tickets":"completed",Reopen:"reopen","Closed-Rejected":7},w=r=>{const o=_[r];r==="In Progress Tickets"?s(`/assistantprogress/${o}`):r==="Completed Tickets"?s(`/assistantview/${o}`):r==="Reopen"?s(`/assistantview/${o}`):o&&s(`/tickets/${o}`)};return t("div",{children:t(S,{children:x.map((r,o)=>t(I,{sm:"6",md:"4",children:t(v,{className:"ticket-card bg-white",onClick:()=>w(r.label),style:{borderRadius:"30px"},children:a(T,{children:[a("div",{className:"d-flex justify-content-between",children:[a(G,{tag:"h6",className:"text-muted pe-auto",children:[r.label,t("h3",{className:"mt-2",children:r.value})]}),r.img&&t("img",{src:r.img,alt:"Icon",style:{width:60,height:60,marginLeft:"10px"}})]}),a("div",{className:"d-flex align-items-center",children:[r.trend==="up"&&t(F,{size:16,style:{color:"green"}}),r.trend==="down"&&t(J,{size:16,style:{color:"red"}}),a("span",{className:"text-primary ms-1",children:[r.percentage,"%"]}),r.trend!=="neutral"&&t(H,{className:"text-muted ms-1",children:r.trend==="up"?"Up from yesterday":"Down from yesterday"})]})]})})},o))})})}A.button`
  background-color: #0C1539 !important;
  width: 200px;
  padding: 10px;
  color: white;
  cursor: pointer;
  border-radius: 10px!important;
  transition: background-color 0.3s;

  &:hover {
    background-color: #1a2447 !important; /* Lighter shade on hover */
  }
`;const oe=()=>{const e=C();c.exports.useState(!1),c.exports.useState([]);const[l,s]=c.exports.useState(""),[h,x]=c.exports.useState("newest"),[_,w]=c.exports.useState([]);c.exports.useState(!1);const u=async()=>{try{const n=localStorage.getItem("authToken"),i=localStorage.getItem("user_id");if(!n){e("/login"),console.error("No token found, please login.");return}const p=await b.get(`https://bapi.reownlogics.com/api/help-desk?assigned_to_id=${i}`,{headers:{Authorization:`Bearer ${n}`}});let g=p.data;g.sort((r,o)=>new Date(o.created_at)-new Date(r.created_at)),w(g.slice(0,5)),console.log("employee data data",p.data)}catch(n){console.error("Error fetching employee data: ",n)}};c.exports.useEffect(()=>{u()},[]);const m=(n,i)=>h==="newest"?new Date(i.createdAt)-new Date(n.createdAt):h==="oldest"?new Date(n.createdAt)-new Date(i.createdAt):0,k=_.filter(n=>n.title.toLowerCase().includes(l.toLowerCase())).sort(m),[d,f]=c.exports.useState(!1);return a("div",{children:[t("div",{className:"d-flex justify-content-end align-items-center mb-2",children:t(U,{isOpen:d,toggle:()=>{f(!d)}})}),t(X,{}),a(v,{className:"bg-white ticket-card",children:[a("div",{className:"p-2 d-flex justify-content-between align-items-center",children:[t("div",{children:t("h3",{children:"Recent Ticket"})}),a("div",{className:"d-flex align-items-center justify-content-end",children:[a(R,{className:"mr-3",children:[t(M,{children:t($,{size:16})}),t(j,{placeholder:"Search by name",value:l,onChange:n=>s(n.target.value)})]}),t(N,{to:"/allassistanttickets",style:{width:"50%"},className:"ms-1",children:"View All"})]})]}),t(T,{children:a(E,{striped:!0,responsive:!0,children:[t("thead",{children:a("tr",{children:[t("th",{children:"Name"}),t("th",{children:"Description"}),t("th",{children:"Department"}),t("th",{children:"Created at"}),t("th",{children:"Actions"})]})}),t("tbody",{children:k.map(n=>a("tr",{children:[t("td",{children:n.title}),t("td",{children:n.description}),t("td",{children:n.department.name}),t("td",{children:t("span",{style:{background:"#daf1df",padding:"6px",borderRadius:"100px"},children:O(n.created_at).format("YYYY-MM-DD hh:mm:ss A")})}),t("td",{children:a(z,{children:[t(L,{className:"pe-1",tag:"span",children:t(P,{size:15})}),t(B,{end:!0,children:t(Y,{onClick:()=>e(`/ticket-detail/${n.id}`),children:t("span",{className:"align-middle ms-50",children:"Detail"})})})]})})]},n.id))})]})})]})]})};export{oe as default};
