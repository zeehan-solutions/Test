import{a6 as f,r as a,K as g,v as r,j as t,M as k}from"./index.361edad1.js";import{S as x,C as b,b as N,T as v}from"./App.19801506.js";import{P as w}from"./planet.7b97fcd0.js";import{h as S}from"./moment.ef14f9cc.js";import{B as y}from"./Backbutton.1eb4ec0d.js";function D(){const{statusId:d}=f(),[i,o]=a.exports.useState([]),[l,h]=a.exports.useState(!0),[n,p]=a.exports.useState(null),u=g();return a.exports.useEffect(()=>{(async()=>{try{const s=localStorage.getItem("authToken"),T=localStorage.getItem("user_role"),m=localStorage.getItem("user_id");if(!s){window.location.href="/login";return}const c=await k.get(`https://bapi.reownlogics.com/api/help-desk?manager_status_id=3&employee_id=${m}`,{headers:{Authorization:`Bearer ${s}`}});o(c.data),console.log("response of tickets",c.data)}catch{p("Failed to fetch tickets")}finally{h(!1)}})()},[d]),l?r("div",{className:"d-flex justify-content-center align-items-center fs-3",style:{height:"calc(100vh - 170px)"},children:[t(x,{}),t("span",{className:"fs-2",style:{paddingBottom:"6px",paddingLeft:"5px"}})]}):n?t("div",{className:"text-danger",children:n}):r("div",{children:[t(y,{}),t(b,{className:"bg-white ticket-card",style:{borderRadius:"30px"},children:t(N,{children:r(v,{responsive:!0,className:"table-ticket",children:[t("thead",{children:r("tr",{children:[t("th",{children:"Name"}),t("th",{children:"Description"}),t("th",{children:"Department"}),t("th",{children:"Created At"}),t("th",{children:"Actions"})]})}),t("tbody",{children:i.length>0?i.map(e=>r("tr",{children:[t("td",{children:e.title}),t("td",{children:e.description}),t("td",{children:e.department.name}),t("td",{children:t("span",{style:{background:"#daf1df",padding:"6px",borderRadius:"100px"},children:S(e.created_at).format("YYYY-MM-DD hh:mm:ss A")})}),t("td",{children:t("button",{type:"button",onClick:()=>u(`/ticket-detail/${e.id}`),class:"btn btn-outline-primary rounded-pill",children:"view"})})]},e.id)):t("tr",{children:t("td",{colSpan:"6",className:"text-center",children:r("div",{className:"card bg-white text-center",children:[t("img",{src:w,height:400,width:400,className:"mx-auto d-block",alt:"Planet"}),t("h2",{children:"No tickets found"})]})})})})]})})})]})}export{D as default};
