import{r as c,a6 as D,j as r,v as a,K as R,L as b}from"./index.8f15b5f4.js";import{R as q,c as v,C as E,b as F,s as _,I as j,f as G,S as Y,g as z,T as J,U as O,O as B,P as M,Q as V,V as W}from"./App.8a97c86d.js";import{h as S}from"./moment.68d8b8f0.js";import{C as K}from"./createhelpdesk.8550a018.js";import{C as Q,a as U}from"./CardTitle.a973e15f.js";import{c as H,C as P,a as Z,I as L,b as X}from"./c3.03250414.js";import{C as $,a as ee}from"./c6.340874ed.js";const re="data:image/png;base64,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";function te(){var l,k,A,w,s,x,p,g,t,i,h,u;const[e,d]=c.exports.useState(null),m=D(),f=async()=>{try{const n=localStorage.getItem("authToken"),o=localStorage.getItem("user_id");if(!n){window.location.href="/login",console.error("No token found, please login.");return}const I=await R.get(`https://bapi.reownlogics.com/api/employee_dashboard/${o}`,{headers:{Authorization:`Bearer ${n}`}});d(I.data)}catch(n){console.error("Error fetching ticket stats:",n),d(null)}};if(c.exports.useEffect(()=>{f()},[]),!e)return r("div",{className:"text-center p-2",children:"Loading stats..."});const T=[{key:"total_tickets",label:"Total Tickets",value:(l=e==null?void 0:e.total_tickets)!=null?l:0,percentage:(k=e==null?void 0:e.percentage_change_total)!=null?k:0,img:H,trend:(e==null?void 0:e.percentage_change_total)>0?"up":(e==null?void 0:e.percentage_change_total)<0?"down":"neutral"},{key:"completed_tickets",label:"Completed Tickets",value:(A=e==null?void 0:e.completed_tickets)!=null?A:0,percentage:(w=e==null?void 0:e.percentage_change_completed)!=null?w:0,img:P,trend:(e==null?void 0:e.percentage_change_completed)>0?"up":(e==null?void 0:e.percentage_change_completed)<0?"down":"neutral"},{key:"pending_tickets",label:"Pending Tickets",value:(s=e==null?void 0:e.pending_tickets)!=null?s:0,percentage:(x=e==null?void 0:e.percentage_change_pending)!=null?x:0,img:Z,trend:(e==null?void 0:e.percentage_change_pending)>0?"up":(e==null?void 0:e.percentage_change_pending)<0?"down":"neutral"},{key:"inprogress_tickets",label:"In Progress Tickets",value:(p=e==null?void 0:e.inprogress_tickets)!=null?p:0,percentage:(g=e==null?void 0:e.percentage_change_inprogress)!=null?g:0,img:$,trend:(e==null?void 0:e.percentage_change_inprogress)>0?"up":(e==null?void 0:e.percentage_change_inprogress)<0?"down":"neutral"},{key:"Reopen",label:"Reopen",value:(t=e==null?void 0:e.reopen_tickets)!=null?t:0,percentage:(i=e==null?void 0:e.percentage_change_reopen)!=null?i:0,img:re,trend:(e==null?void 0:e.percentage_change_reopen)>0?"up":(e==null?void 0:e.percentage_change_reopen)<0?"down":"neutral"},{key:"Closed-Rejected",label:"Closed-Rejected",value:(h=e==null?void 0:e.closed_tickets)!=null?h:0,percentage:(u=e==null?void 0:e.percentage_change_closed)!=null?u:0,img:ee,trend:(e==null?void 0:e.percentage_change_closed)>0?"up":(e==null?void 0:e.percentage_change_closed)<0?"down":"neutral"}],y={"Pending Tickets":2,"In Progress Tickets":3,"Completed Tickets":4,Reopen:6,"Closed-Rejected":7},C=n=>{const o=y[n];n==="In Progress Tickets"?m("/in-progress-tickets"):o&&m(`/tickets/${o}`)};return r("div",{children:r(q,{children:T.map((n,o)=>r(v,{sm:"6",md:"4",children:r(E,{className:"ticket-card bg-white",onClick:()=>C(n.label),style:{borderRadius:"30px"},children:a(F,{children:[a("div",{className:"d-flex justify-content-between",children:[a(Q,{tag:"h6",className:"text-muted pe-auto",children:[n.label,r("h3",{className:"mt-2",children:n.value})]}),n.img&&r("img",{src:n.img,alt:"Icon",style:{width:60,height:60,marginLeft:"10px"}})]}),a("div",{className:"d-flex align-items-center",children:[n.trend==="up"&&r(L,{size:16,style:{color:"green"}}),n.trend==="down"&&r(X,{size:16,style:{color:"red"}}),a("span",{className:"text-primary ms-1",children:[n.percentage,"%"]}),n.trend!=="neutral"&&r(U,{className:"text-muted ms-1",children:n.trend==="up"?"Up from yesterday":"Down from yesterday"})]})]})})},o))})})}const N=_.button`
  background-color: #0C1539 !important;
  width: 200px;
  padding: 10px;
  color: white;
  cursor: pointer;
  border-radius: 10px!important;
  transition: background-color 0.3s;

  &:hover {
    background-color: #1a2447 !important; /* Lighter shade on hover */
  }
`,se=()=>{const e=D();c.exports.useState(!1),c.exports.useState([]);const[d,m]=c.exports.useState(""),[f,T]=c.exports.useState("newest"),[y,C]=c.exports.useState([]);c.exports.useState(!1);const l=localStorage.getItem("user_role"),k=async()=>{try{const t=localStorage.getItem("authToken"),i=localStorage.getItem("user_id");if(!t){e("/login"),console.error("No token found, please login.");return}const h=await R.get("https://bapi.reownlogics.com/api/help-desk",{params:{employee_id:i},headers:{Authorization:`Bearer ${t}`}});let u=h.data;u.sort((n,o)=>new Date(o.created_at)-new Date(n.created_at)),C(u.slice(0,5)),console.log("employee data data",h.data)}catch(t){console.error("Error fetching employee data: ",t)}};c.exports.useEffect(()=>{k()},[]);const A=(t,i)=>f==="newest"?new Date(i.createdAt)-new Date(t.createdAt):f==="oldest"?new Date(t.createdAt)-new Date(i.createdAt):0,w=y.filter(t=>t.title.toLowerCase().includes(d.toLowerCase())).sort(A),[s,x]=c.exports.useState(!1),p=()=>{x(!s)},g=()=>{const t=localStorage.getItem("user_id");l==="assistant"?e(`/assistant_dashboard/${t}`):l==="manager"&&e(`/manager_dashboard/${t}`)};return a("div",{children:[a("div",{className:"d-flex justify-content-end align-items-center mb-2",children:[l==="assistant"&&r(N,{onClick:g,children:"Assigned Tickets"}),l==="manager"&&r(N,{onClick:g,children:"Managed Tickets"}),r(N,{onClick:p,children:"+ Create New"}),r(K,{isOpen:s,toggle:p})]}),r(te,{}),a(E,{className:"bg-white ticket-card",children:[a("div",{className:"p-2 d-flex justify-content-between align-items-center",children:[r("div",{children:r("h3",{children:"Recent Ticket"})}),a("div",{className:"d-flex align-items-center justify-content-end",children:[a(j,{className:"mr-3",children:[r(G,{children:r(Y,{size:16})}),r(z,{placeholder:"Search by name",value:d,onChange:t=>m(t.target.value)})]}),r(b,{to:"/alltickets",style:{width:"50%"},className:"ms-1",children:"View All"})]})]}),r(F,{children:a(J,{striped:!0,responsive:!0,children:[r("thead",{children:a("tr",{children:[r("th",{children:"Name"}),r("th",{children:"Requested Date"}),r("th",{children:"Requested Time"}),r("th",{children:"Rating"}),r("th",{children:"Time for Requested to Resolution"}),r("th",{children:"Actions"})]})}),r("tbody",{children:w.map(t=>a("tr",{children:[r("td",{children:t.title}),r("td",{children:S(t.created_at).format("YYYY-MM-DD")}),r("td",{children:S(t.created_at).format("hh:mm:ss A")}),r("td",{children:t.title}),r("td",{children:r("span",{style:{background:"#daf1df",padding:"6px",borderRadius:"100px"},children:S(t.created_at).format("YYYY-MM-DD hh:mm:ss A")})}),r("td",{children:a(O,{children:[r(B,{className:"pe-1",tag:"span",children:r(M,{size:15})}),r(V,{end:!0,children:r(W,{onClick:()=>e(`/ticket-detail/${t.id}`),children:r("span",{className:"align-middle ms-50",children:"Detail"})})})]})})]},t.id))})]})})]})]})};export{se as default};
